<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dishcovery</title>

    <link rel="stylesheet" th:href="@{/css/mainPage.css}">
    <link rel="stylesheet" th:href="@{/css/roulette.css}">
</head>
<body>

<form id="mainForm" method="get">
    <div th:insert="fragments/header :: site-header"></div>

    <main class="page">

        <!-- 상단 탭 -->
        <section class="controls container">
            <div class="segmented">
                <button type="button"
                        th:class="${rcpClassNm}"
                        onclick="handleSegmentClick(this,'/pageGubun?gubun=recipe')">레시피</button>
                <button type="button"
                        th:class="${rankClassNm}"
                        onclick="handleSegmentClick(this,'/pageGubun?gubun=rank')">랭킹</button>
                <button type="button"
                        th:class="${lastClassNm}"
                        onclick="handleSegmentClick(this,'/pageGubun?gubun=last')">룰렛추천</button>
                <button type="button"
                        th:class="${aiClassNm}"
                        onclick="handleSegmentClick(this,'/pageGubun?gubun=ai')">AI추천</button>
            </div>
        </section>

        <!-- 룰렛 -->
        <div class="roulette">

            <!-- 🔺 화살표 (위쪽, 예쁜 스타일) -->
            <div class="roulette-pointer"></div>

            <div id="wheel" class="wheel">

                <!-- 구분선 -->
                <div id="wheel-lines" class="wheel-lines"></div>

                <!-- 레시피 (서버에서 이미 최대 6개만 내려온 상태) -->
                <div th:each="recipe, stat : ${recipes}"
                     class="slice"
                     th:data-recipe-id="${recipe.recipeId}"
                     th:style="'transform: rotate(' + ${stat.index * (360 / recipes.size())} + 'deg) translateY(-240px);'">

                    <div class="slice-inner">
                        <img th:src="${recipe.imgUrl}" class="recipe-img">
                        <div class="recipe-title" th:text="${recipe.title}"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 버튼 -->
        <div class="spin-btn">
            <button type="button" id="spin-btn" onclick="spin()">돌리기!</button>
        </div>

        <!-- 결과 모달 -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <h2>🎉 레시피!</h2>
                <img id="modalImg">
                <p id="modalTitle"></p>
                <button type="button" onclick="openDetail()">상세보기</button>
                <button type="button" onclick="closeModal()">닫기</button>
            </div>
        </div>

    </main>
</form>

<script th:src="@{/js/mainPage.js}"></script>
</body>
</html>
